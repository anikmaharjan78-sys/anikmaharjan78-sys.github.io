<!DOCTYPE html>
<html>
<head>
  <title>Jump Game with Lives & Checkpoints</title>
  <style>
    canvas { 
      background: #eee; 
      display: block; 
      margin: 20px auto; 
      border: 2px solid #333; 
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="600" height="300"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let player = { x: 50, y: 200, w: 30, h: 30, color: "blue", dy: 0, jumping: false };
    let gravity = 0.6;
    let jumpPower = -12;
    let ground = 230;

    // Easier obstacles
    let obstacles = [
      { x: 300, y: 220, w: 25, h: 30 }, 
      { x: 600, y: 220, w: 25, h: 30 },
      { x: 850, y: 220, w: 30, h: 30 }
    ];

    let finishLine = 1200;
    let gameWon = false;
    let gameOver = false;

    let cameraX = 0; 
    let score = 0;

    let lives = 3;
    let checkpoint = 50; // respawn point

    function resetGame(){
      player.x = 50;
      player.y = ground;
      player.dy = 0;
      player.jumping = false;
      gameWon = false;
      gameOver = false;
      cameraX = 0;
      score = 0;
      lives = 3;
      checkpoint = 50;
    }

    function respawn(){
      lives--;
      if (lives <= 0) {
        gameOver = true;
      } else {
        player.x = checkpoint;
        player.y = ground;
        player.dy = 0;
        player.jumping = false;
      }
    }

    function update(){
      if (gameWon || gameOver) return;

      // Gravity
      player.dy += gravity;
      player.y += player.dy;

      // Ground collision
      if (player.y > ground) {
        player.y = ground;
        player.dy = 0;
        player.jumping = false;
      }

      // Move forward automatically
      player.x += 2;

      // Camera follows player
      cameraX = player.x - 100;

      // Score increases with distance
      score = Math.floor(player.x / 10);

      // Update checkpoint every 400px
      if (player.x > checkpoint + 400) {
        checkpoint += 400;
      }

      // Check obstacle collisions
      for (let obs of obstacles) {
        if (
          player.x < obs.x + obs.w &&
          player.x + player.w > obs.x &&
          player.y < obs.y + obs.h &&
          player.y + player.h > obs.y
        ) {
          respawn();
        }
      }

      // Win condition
      if (player.x + player.w >= finishLine) {
        gameWon = true;
      }
    }

    function draw(){
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      ctx.save();
      ctx.translate(-cameraX, 0);

      // Ground
      ctx.fillStyle = "#555";
      ctx.fillRect(0, ground + player.h, finishLine + 200, 50);

      // Obstacles
      ctx.fillStyle = "brown";
      for (let obs of obstacles) {
        ctx.fillRect(obs.x, obs.y, obs.w, obs.h);
      }

      // Finish line
      ctx.fillStyle = "red";
      ctx.fillRect(finishLine, 0, 10, canvas.height);

      // Player
      drawRoundedRect(player.x, player.y, player.w, player.h, 8, player.color);

      ctx.restore();

      // UI (fixed on screen)
      ctx.fillStyle = "black";
      ctx.font = "20px Arial";
      ctx.fillText("Score: " + score, 20, 30);
      ctx.fillText("Lives: " + lives, 20, 60);

      if (gameWon) {
        ctx.fillStyle = "green";
        ctx.font = "30px Arial";
        ctx.fillText("ðŸŽ‰ You Win!", canvas.width/2 - 70, canvas.height/2);
      }
      if (gameOver) {
        ctx.fillStyle = "black";
        ctx.font = "30px Arial";
        ctx.fillText("ðŸ’€ Game Over!", canvas.width/2 - 90, canvas.height/2);
      }
    }

    function drawRoundedRect(x,y,w,h,r,fillColor){
      ctx.fillStyle = fillColor;
      ctx.beginPath();
      ctx.moveTo(x+r,y);
      ctx.arcTo(x+w,y,x+w,y+h,r);
      ctx.arcTo(x+w,y+h,x,y+h,r);
      ctx.arcTo(x,y+h,x,y,r);
      ctx.arcTo(x,y,x+w,y,r);
      ctx.closePath();
      ctx.fill();
    }

    function loop(){
      update();
      draw();
      requestAnimationFrame(loop);
    }

    // Controls
    window.addEventListener("keydown", e => {
      if ((e.key === " " || e.key === "ArrowUp") && !player.jumping) {
        player.dy = jumpPower;
        player.jumping = true;
      }
      if (e.key === "r" || e.key === "R") resetGame();
    });

    // Start
    resetGame();
    loop();
  </script>
  <div style="text-align:center; margin-top:20px;">
  <p>
    AI Chat History: 
    <a href="https://chat.openai.com/share/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" target="_blank">
      Click here to view
    </a>
  </p>
  </div>
</body>

</html>


