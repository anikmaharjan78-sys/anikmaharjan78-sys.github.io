<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple Jumping Game</title>
  <style>
    body { margin: 0; background: #87ceeb; overflow: hidden; }
    canvas { background: #cfe9ff; display: block; margin: 0 auto; border: 3px solid #333; }
    #overlay {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8); color: #fff; display: flex; flex-direction: column;
      align-items: center; justify-content: center; font-family: Arial, sans-serif;
    }
    #overlay h1 { margin-bottom: 20px; }
    #overlay p { margin: 5px 0; }
  </style>
</head>
<body>
<div id="overlay">
  <h1>Welcome to the Jumping Game!</h1>
  <p>‚û°Ô∏è Use <b>Arrow Keys</b> or <b>A / D</b> to move</p>
  <p>‚§¥Ô∏è Use <b>Space / W / Up Arrow</b> to jump</p>
  <p>üíÄ Avoid red spikes</p>
  <p>üèÅ Reach the yellow finish line to win</p>
  <p>üîÑ Press <b>R</b> to restart</p>
  <button onclick="startGame()">Start Game</button>
</div>
<canvas id="game" width="800" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const W = canvas.width, H = canvas.height;

// game variables
let player, platforms, obstacles, finish, cameraX, keys = {}, gameOver=false, gameWin=false;
const gravity = 0.8, jumpPower = -12, speed = 4, levelWidth = 3000;

function resetGame() {
  player = { x: 50, y: H-100, w: 40, h: 40, vx: 0, vy: 0, onGround: false, jumping: false };
  cameraX = 0;
  gameOver = false;
  gameWin = false;

  platforms = [
    {x:0, y:H-60, w:levelWidth, h:60}, // ground
    {x:300, y:H-150, w:100, h:20},
    {x:600, y:H-200, w:120, h:20},
    {x:1000, y:H-180, w:150, h:20},
    {x:1400, y:H-220, w:120, h:20}
  ];

  obstacles = [
    {x:500, y:H-80, w:30, h:20},
    {x:900, y:H-80, w:30, h:20},
    {x:1600, y:H-80, w:30, h:20}
  ];

  finish = {x: levelWidth-100, y:H-260, w:40, h:200};
}

function rect(r, color) { ctx.fillStyle = color; ctx.fillRect(r.x - cameraX, r.y, r.w, r.h); }

function update() {
  if(gameOver || gameWin) return;

  // move
  if(keys["ArrowRight"] || keys["d"]) player.vx = speed;
  else if(keys["ArrowLeft"] || keys["a"]) player.vx = -speed;
  else player.vx = 0;

  if((keys[" "] || keys["ArrowUp"] || keys["w"]) && player.onGround && !player.jumping) {
    player.vy = jumpPower;
    player.onGround = false;
    player.jumping = true;
  }

  // physics
  player.vy += gravity;
  player.x += player.vx;
  player.y += player.vy;

  // collisions with platforms
  player.onGround = false;
  for(let p of platforms) {
    if(player.x < p.x+p.w && player.x+player.w > p.x && player.y < p.y+p.h && player.y+player.h > p.y) {
      if(player.vy >= 0 && player.y+player.h - player.vy <= p.y) {
        player.y = p.y - player.h;
        player.vy = 0;
        player.onGround = true;
        player.jumping = false;
      }
    }
  }

  // spikes
  for(let s of obstacles) {
    if(player.x < s.x+s.w && player.x+player.w > s.x && player.y < s.y+s.h && player.y+player.h > s.y) {
      gameOver = true;
    }
  }

  // finish line
  if(player.x+player.w > finish.x && player.y+player.h > finish.y) {
    gameWin = true;
  }

  // camera
  cameraX = player.x - W/2;
  if(cameraX < 0) cameraX = 0;
  if(cameraX > levelWidth-W) cameraX = levelWidth-W;
}

function draw() {
  ctx.clearRect(0,0,W,H);
  for(let p of platforms) rect(p, "#228B22");
  for(let s of obstacles) rect(s, "#b00");
  rect(finish, "#ff0");
  rect(player, "#33c");

  ctx.fillStyle = "black";
  ctx.font = "20px Arial";
  if(gameOver) ctx.fillText("You Lost! Press R to restart", W/2-120, H/2);
  if(gameWin) ctx.fillText("You Win! Press R to restart", W/2-120, H/2);
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

// keys
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => {
  keys[e.key] = false;
  if (e.key === "r" || e.key === "R") resetGame();
});

// start game button
function startGame() {
  document.getElementById("overlay").style.display = "none";
  resetGame();
  loop();

  // Open external link once when game starts
  window.open("https://chatgpt.com/share/68c90a3f-3138-8012-b611-792724a6dc4a", "_blank");
}
</script>
</body>
</html>
